<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add New Bug</title>
</head>
<body>
    <script>
        function checkForm()
        {
            if(document.getElementById('Project').value == ""){
                event.preventDefault();
                document.getElementById('Project').placeholder = "MISSING"
            }
        }

    </script>
    <div id="title" style="display:flex">
        <h1>Simple Defect Tracking System</h1>
    </div>
    <div id="newBugForm">
        <form action="/updateDefect" method="post" onsubmit="return checkForm()">
            <input type="text" id="ID" placeholder="ID" name="ID" style="visibility: hidden;">
            <div style="display:flex">
                <div id="ProjectBlock" style="margin: 10px;">
                    <label for="Project">Project</label>
                    <br>
                    <input type="text" id="Project" placeholder="Project Name" name="Project">
                </div>
                <div id="BugtypeBlock" style="margin: 10px;">
                    <label for="Bugtype">Bug type</label>
                    <br>
                    <input type="text" id="Bugtype" placeholder="Type of bug" name="BugType">
                </div>
                <div id="PriorityBlock" style="margin: 10px;">
                    <label for="Priority">Priority</label>
                    <br>
                    <input type="text" id="Priority" placeholder="Priority level" name="Priority">
                </div>
            </div>
            <div id="DescriptionBlock" style="margin: 10px;">
                <label for="Description">Description</label>
                <br>
                <input type="text" id="Description" placeholder="Describe the bug" style="width:480px;" name="Description">
            </div>
            <div style="display:flex">
                <div id="OperatingSysBlock" style="margin: 10px;">
                    <label for="OperatingSys">Operating System</label>
                    <br>
                    <input type="text" id="OperatingSys" placeholder="Operating system" name="OperatingSys">
                </div>
                <div id="AssigneeBlock" style="margin: 10px;">
                    <label for="Assignee">Assigned to</label>
                    <br>
                    <input type="text" id="Assignee" placeholder="Assignee" name="Assignee">
                </div>
                <div id="StatusBlock" style="margin: 10px;">
                    <label for="Status">Status</label>
                    <br>
                    <input type="text" id="Status" placeholder="Status" name="Status">
                </div>
            </div>
            <button style="margin: 10px;">Submit</button>            
        </form>
        <script>
            var queryData = window.location.search;
            console.log(queryData);
            var entries = new URLSearchParams(queryData);
            document.getElementById("ID").value = entries.get("id")
            document.getElementById("Project").value = entries.get("Project");
            document.getElementById("Bugtype").value = entries.get("BugType");
            document.getElementById("Priority").value = entries.get("Priority");
            document.getElementById("Description").value = entries.get("Description");
            document.getElementById("OperatingSys").value = entries.get("OperatingSys");
            document.getElementById("Assignee").value = entries.get("Assignee");
            document.getElementById("Status").value = entries.get("Status");
        </script>
    </div>
</body>
</html>